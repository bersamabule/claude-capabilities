# Technical Debt Radar - Report

Generate a comprehensive technical debt dashboard with trends and prioritization.

## Usage

`/debt-report` - Full debt report
`/debt-report:trends` - Show debt trends over time
`/debt-report:by-category` - Group by debt category
`/debt-report:by-file` - Group by file/module

## Instructions

### Step 1: Load Scan Data

Load latest scan from `docs/debt/scan-[date].json`

If no scan exists:
- Run `/debt-scan` first
- Or offer to run it now

### Step 2: Load Historical Data

If multiple scans exist, load for trend analysis:
- Compare current vs previous
- Calculate delta (improving or worsening)
- Identify newly introduced debt

### Step 3: Generate Dashboard

```markdown
# Technical Debt Dashboard

**Project**: [name]
**Report Date**: [timestamp]
**Last Scan**: [date]

---

## Executive Summary

| Metric | Value | Trend |
|--------|-------|-------|
| Debt Score | [score] | [↑/↓/→] |
| Total Issues | [count] | [↑/↓/→] |
| Critical Issues | [count] | [↑/↓/→] |
| Estimated Fix Time | [hours]h | - |
| Health Rating | [rating] | [↑/↓/→] |

### Trend Sparkline (Last 5 Scans)
```
Score: ████▓▓░░██ (improving)
```

---

## Debt by Category

### Complexity
**Score**: [X] | **Issues**: [Y]

| Issue | File | Severity | Effort |
|-------|------|----------|--------|
| Function too long (87 lines) | src/utils.ts:45 | High | 30min |
| Deep nesting (5 levels) | src/parser.ts:120 | High | 1h |

### Code Smells
**Score**: [X] | **Issues**: [Y]

| Issue | File | Severity | Effort |
|-------|------|----------|--------|
| Empty catch block | src/api.ts:89 | High | 15min |
| Magic number (86400) | src/cache.ts:12 | Low | 5min |

### TODOs & FIXMEs
**Score**: [X] | **Issues**: [Y]

| Marker | File | Age | Priority |
|--------|------|-----|----------|
| TODO: refactor this | src/old.ts:45 | 8 months | High |
| FIXME: race condition | src/async.ts:23 | 2 weeks | Medium |

### Duplication
**Score**: [X] | **Issues**: [Y]

| Pattern | Occurrences | Files | Lines |
|---------|-------------|-------|-------|
| Validation logic | 3 | auth.ts, user.ts, admin.ts | ~45 each |

### Test Gaps
**Score**: [X] | **Issues**: [Y]

| File | Coverage | Risk |
|------|----------|------|
| src/payment.ts | 0% | Critical |
| src/auth.ts | 23% | High |

### Architecture Issues
**Score**: [X] | **Issues**: [Y]

| Issue | Impact | Files Involved |
|-------|--------|----------------|
| Circular dependency | High | A.ts ↔ B.ts |
| Layer violation | Medium | UI imports DB directly |

---

## Hotspot Analysis

Files with the most accumulated debt:

| Rank | File | Score | Issues | Recommendation |
|------|------|-------|--------|----------------|
| 1 | src/legacy.ts | 45 | 12 | Consider rewrite |
| 2 | src/utils.ts | 32 | 8 | Split into modules |
| 3 | src/api.ts | 28 | 6 | Refactor gradually |

---

## Prioritized Action Plan

### This Week (Critical)
1. **Fix empty catch blocks** - 4 instances, ~1h total
2. **Add tests for payment.ts** - Critical path untested

### This Sprint (High)
1. **Refactor validateUser()** - 120 lines → split into helpers
2. **Extract duplicate validation** - 3 files share same logic
3. **Resolve circular dependency** - A.ts ↔ B.ts

### Backlog (Medium/Low)
1. Replace magic numbers with constants
2. Remove commented-out code
3. Address ancient TODOs

---

## Debt Trend Analysis

### Last 30 Days

| Date | Score | Issues | Change |
|------|-------|--------|--------|
| 2025-12-15 | 87 | 34 | +2 |
| 2025-12-08 | 85 | 32 | -5 |
| 2025-12-01 | 90 | 37 | +8 |

**Trend**: Slightly worsening (+2 this week)

### Debt Introduction Rate
- New debt this week: 5 issues
- Debt paid off: 3 issues
- Net: +2 issues

---

## Recommendations

### Process Improvements
1. Add pre-commit hook for complexity check
2. Set TODO expiration dates
3. Include debt in PR review checklist

### Refactoring Opportunities
1. `src/legacy.ts` - Good candidate for full rewrite
2. `src/utils.ts` - Split by domain (string, date, validation)

### Quick Wins (< 30 min each)
1. Add constants for magic numbers
2. Fix empty catch blocks
3. Remove dead code

---

## Export Options

- Save as JSON: `docs/debt/report-[date].json`
- Save as Markdown: `docs/debt/report-[date].md`
- Track in issue tracker: Create GitHub issues for top items

---

*Generated by Technical Debt Radar*
*Run `/debt-scan` to refresh data*
*Run `/debt-fix [item]` for specific guidance*
```

### Step 4: Save Report

Save to `docs/debt/report-[date].md` and `docs/debt/report-[date].json`
